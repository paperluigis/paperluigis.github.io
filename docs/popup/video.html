<body onload="init()">
    <script>
    function chkClosed(){
      if(!c || c.closed == true){
         video.controls = true;
         return true;
      }
      setTimeout(chkClosed, 500)
    }
    function doResizing(){
        var q = video.videoWidth;
        var w = video.videoHeight;
        var a = screen.availWidth;
        var s = screen.availHeight;
        var z = outerWidth - innerWidth;
        var x = outerHeight - innerHeight;
        if (q == 0 || w == 0){ // if video is not loaded \ or no video data
            resizeTo(300 + z, 150 + x); // then resize window to 300 by 150
        } else if (q < a / 2 && w < s / 2){ // if video's size smaller than screen's size divided by 2
            resizeTo((q * 2) + z, (w * 2) + x); // then resize window by video's size multiplied by 2
        } else { // else if video sized that properly...
            resizeTo(q + z, w + z); // then resize window pixel-perfectly.
        }
    }
    var getParams = function (url) {
        var params = {};
        var parser = document.createElement('a');
        parser.href = url;
        var query = parser.search.substring(1);
        var vars = query.split('&');
        for (var i = 0; i < vars.length; i++) {
    		var pair = vars[i].split('=');
    		params[pair[0]] = decodeURIComponent(pair[1]);
       	}
       	return params;
    };
    function init(){
    	video = document.querySelector("video")
    	video.src = getParams(location.href).src
    	window.c = open("videoctr.html", "cont", "width=250, height=50")
    	c.resizeTo(300, 180)
    	chkClosed()
    }
    function taskA(){
        if (video.controls == true){
            window.c = open("videoctr.html", "cont", "width=250, height=50")
    	    c.resizeTo(300, 180)
    	    chkClosed()
    	    video.controls = false
        }
        return false
    }
    </script>
    <video id="video" autoplay oncontextmenu="taskA(); return false" onclick="this.play()" controlslist="nodownload" onloadeddata="doResizing()" src="" preload="metadata" style="position: fixed;left: 0px;top: 0px;width: 100%;height: 100%;"></video>
</body>